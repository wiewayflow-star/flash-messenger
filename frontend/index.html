<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flash</title>
    <link rel="icon" href="assets/logo.svg" type="image/svg+xml">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/voice.css">
</head>
<body>
    <!-- Custom Titlebar for Electron -->
    <div id="electron-titlebar" class="electron-titlebar">
        <div class="titlebar-drag-region">
            <div class="titlebar-icon" id="titlebar-icon">
                <img src="assets/logo-white.svg" alt="Flash" width="16" height="16">
            </div>
            <span class="titlebar-title" id="titlebar-title">Flash</span>
        </div>
        <div class="titlebar-controls">
            <button class="titlebar-btn" id="titlebar-minimize" title="–°–≤–µ—Ä–Ω—É—Ç—å">
                <svg width="12" height="12" viewBox="0 0 12 12"><rect fill="currentColor" width="10" height="1" x="1" y="6"/></svg>
            </button>
            <button class="titlebar-btn" id="titlebar-maximize" title="–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å">
                <svg width="12" height="12" viewBox="0 0 12 12"><rect fill="none" stroke="currentColor" width="9" height="9" x="1.5" y="1.5"/></svg>
            </button>
            <button class="titlebar-btn titlebar-close" id="titlebar-close" title="–ó–∞–∫—Ä—ã—Ç—å">
                <svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M6.707 6l3.146-3.146a.5.5 0 00-.707-.708L6 5.293 2.854 2.146a.5.5 0 10-.708.708L5.293 6l-3.147 3.146a.5.5 0 00.708.708L6 6.707l3.146 3.147a.5.5 0 00.708-.708L6.707 6z"/></svg>
            </button>
        </div>
    </div>

    <div id="app">
        <!-- Auth Screen -->
        <div id="auth-screen" class="screen active">
            <div class="auth-container">
                <div class="auth-logo">
                    <img src="assets/logo.svg" alt="Flash" width="80" height="80">
                    <h1>Flash</h1>
                </div>
                
                <div class="auth-tabs">
                    <button type="button" class="auth-tab active" data-tab="login">–í—Ö–æ–¥</button>
                    <button type="button" class="auth-tab" data-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>

                <form id="login-form" class="auth-form active" onsubmit="return false;">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" required placeholder="your@email.com" autocomplete="email">
                    </div>
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">–í–æ–π—Ç–∏</button>
                </form>

                <form id="register-form" class="auth-form" onsubmit="return false;">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" required placeholder="your@email.com" autocomplete="email">
                    </div>
                    <div class="form-group">
                        <label>–ù–∏–∫–Ω–µ–π–º</label>
                        <input type="text" name="username" required placeholder="FlashUser" minlength="2" maxlength="32" autocomplete="username">
                    </div>
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6" autocomplete="new-password">
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                </form>

                <div id="auth-error" class="auth-error"></div>
            </div>
        </div>

        <!-- Main App -->
        <div id="main-screen" class="screen">
            <!-- Server Sidebar -->
            <nav class="server-sidebar">
                <div class="server-icon home-icon active" data-server="home">
                    <img src="assets/logo-white.svg" alt="Flash" width="28" height="28">
                    <span class="server-tooltip">–õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</span>
                </div>
                <div class="sidebar-divider"></div>
                <div id="server-list"></div>
                <div class="server-icon add-server">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    <span class="server-tooltip">–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä</span>
                </div>
                <div class="server-icon join-server">
                    <svg viewBox="0 0 24 24" width="24" height="24">
                        <path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                    </svg>
                    <span class="server-tooltip">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</span>
                </div>
            </nav>

            <!-- Channel Sidebar -->
            <aside class="channel-sidebar">
                <div class="channel-header">
                    <h2 id="server-name">Flash</h2>
                </div>
                <div class="channel-list" id="channel-list"></div>
                <div class="user-panel">
                    <div class="user-info" id="user-info-clickable">
                        <div class="user-avatar" id="user-avatar"></div>
                        <div class="user-details">
                            <span class="username" id="user-name">User</span>
                            <span class="user-tag" id="user-tag">#0000</span>
                        </div>
                    </div>
                    <div class="user-controls">
                        <button class="icon-btn has-tooltip" id="user-mute-btn">
                            <span class="tooltip-bubble">–ó–∞–≥–ª—É—à–∏—Ç—å</span>
                            <svg viewBox="0 0 24 24" width="20" height="20">
                                <path fill="currentColor" d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.91-3c-.49 0-.9.36-.98.85C16.52 14.2 14.47 16 12 16s-4.52-1.8-4.93-4.15c-.08-.49-.49-.85-.98-.85-.61 0-1.09.54-1 1.14.49 3 2.89 5.35 5.91 5.78V20c0 .55.45 1 1 1s1-.45 1-1v-2.08c3.02-.43 5.42-2.78 5.91-5.78.1-.6-.39-1.14-1-1.14z"/>
                            </svg>
                        </button>
                        <button class="icon-btn has-tooltip" id="user-deafen-btn">
                            <span class="tooltip-bubble">–û—Ç–∫–ª. –∑–≤—É–∫</span>
                            <svg viewBox="0 0 24 24" width="20" height="20">
                                <path fill="currentColor" d="M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7c0-4.97-4.03-9-9-9z"/>
                            </svg>
                        </button>
                        <button class="icon-btn has-tooltip" id="settings-btn">
                            <span class="tooltip-bubble">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
                            <svg viewBox="0 0 24 24" width="20" height="20">
                                <path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <header class="content-header">
                    <div class="channel-info">
                        <span class="channel-hash" id="channel-hash">#</span>
                        <span class="channel-name" id="current-channel-name">–æ–±—â–∏–π</span>
                    </div>
                    <div class="header-actions">
                        <button class="icon-btn" id="members-toggle" title="–£—á–∞—Å—Ç–Ω–∏–∫–∏">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" id="search-users-btn" title="–ù–∞–π—Ç–∏ –ª—é–¥–µ–π">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                        </button>
                    </div>
                </header>

                <div class="content-body">
                    <div class="messages-container" id="messages-container">
                        <div class="messages-list" id="messages-list"></div>
                        <div class="new-messages-bar" id="new-messages-bar">
                            <div class="new-messages-bar-left">
                                <span id="new-messages-text">1 –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å 19:55</span>
                            </div>
                            <div class="new-messages-bar-right">
                                <span>–ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ</span>
                                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12zm-9.5-2.5L14 10l1.41 1.41L10.5 16.5 7 13l1.41-1.41z"/></svg>
                            </div>
                        </div>
                    </div>

                    <div class="members-sidebar" id="members-sidebar">
                        <h3>–£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
                        <div class="members-list" id="members-list"></div>
                    </div>
                </div>

                <div class="message-input-container">
                    <div class="mentions-popup" id="mentions-popup"></div>
                    <div class="typing-indicator" id="typing-indicator"></div>
                    <form class="message-form" id="message-form">
                        <div class="input-wrapper">
                            <button type="button" class="icon-btn attach-btn">
                                <svg viewBox="0 0 24 24" width="24" height="24">
                                    <path fill="currentColor" d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"/>
                                </svg>
                            </button>
                            <input type="text" id="message-input" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off">
                            <div class="input-actions">
                                <button type="button" class="icon-btn emoji-btn" id="emoji-btn">üòä</button>
                            </div>
                        </div>
                    </form>
                </div>
            </main>
        </div>
    </div>


    <!-- Modals -->
    <div class="modal" id="create-server-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="create-server-form">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞</label>
                    <input type="text" name="name" required placeholder="–ú–æ–π —Å–µ—Ä–≤–µ—Ä" minlength="2">
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                    <textarea name="description" placeholder="–û —á—ë–º —ç—Ç–æ—Ç —Å–µ—Ä–≤–µ—Ä?"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="settings-modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="settings-container">
                <div class="settings-sidebar">
                    <button class="settings-tab active" data-section="account">–ê–∫–∫–∞—É–Ω—Ç</button>
                    <button class="settings-tab" data-section="security">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</button>
                    <button class="settings-tab" data-section="audio">–ê—É–¥–∏–æ</button>
                    <button class="settings-tab" data-section="appearance">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</button>
                    <button class="settings-tab" data-section="flash-mode">Flash Mode</button>
                    <button class="settings-tab admin-only" data-section="admin" id="admin-tab" style="display: none;">üõ°Ô∏è –ê–¥–º–∏–Ω</button>
                    <div class="settings-divider"></div>
                    <button class="settings-tab danger" id="logout-btn">–í—ã–π—Ç–∏</button>
                </div>
                <div class="settings-content">
                    <div class="settings-section active" data-section="account">
                        <h3>–ú–æ–π –∞–∫–∫–∞—É–Ω—Ç</h3>
                        <div class="profile-card">
                            <div class="profile-banner" id="settings-banner" style="cursor: pointer;" title="–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –±–∞–Ω–Ω–µ—Ä">
                                <div class="banner-overlay">
                                    <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                                </div>
                                <input type="file" id="banner-file-input" accept="image/*" style="display: none;">
                            </div>
                            <div class="profile-info">
                                <div class="profile-avatar-wrapper">
                                    <div class="profile-avatar" id="settings-avatar" style="cursor: pointer;" title="–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä">
                                        <div class="avatar-overlay">
                                            <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                                        </div>
                                    </div>
                                    <input type="file" id="avatar-file-input" accept="image/*" style="display: none;">
                                </div>
                                <div class="profile-details">
                                    <span class="profile-name" id="settings-username">User</span>
                                    <span class="profile-tag" id="settings-tag">#0000</span>
                                </div>
                            </div>
                        </div>
                        <form id="profile-form">
                            <div class="form-group">
                                <label>–ù–∏–∫–Ω–µ–π–º</label>
                                <input type="text" name="username" id="profile-username">
                            </div>
                            <div class="form-group">
                                <label>–û —Å–µ–±–µ</label>
                                <textarea name="bio" id="profile-bio" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ..."></textarea>
                            </div>
                            <div class="form-group">
                                <label>–°—Ç–∞—Ç—É—Å</label>
                                <select name="status" id="profile-status">
                                    <option value="online">–û–Ω–ª–∞–π–Ω</option>
                                    <option value="idle">–ù–µ –Ω–∞ –º–µ—Å—Ç–µ</option>
                                    <option value="dnd">–ù–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å</option>
                                    <option value="offline">–ù–µ–≤–∏–¥–∏–º—ã–π</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </form>
                    </div>
                    <div class="settings-section" data-section="security">
                        <h3>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3>
                        <form id="password-form">
                            <div class="form-group">
                                <label>–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" name="currentPassword" id="current-password" required>
                            </div>
                            <div class="form-group">
                                <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" name="newPassword" id="new-password" minlength="6" required>
                            </div>
                            <div class="form-group">
                                <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" name="confirmPassword" id="confirm-password" minlength="6" required>
                            </div>
                            <button type="submit" class="btn btn-primary">–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                            <p id="password-message" style="margin-top: 10px; font-size: 13px;"></p>
                        </form>
                    </div>
                    <div class="settings-section" data-section="audio">
                        <h3>–ê—É–¥–∏–æ</h3>
                        <div class="audio-settings">
                            <div class="form-group">
                                <label>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞ (–º–∏–∫—Ä–æ—Ñ–æ–Ω)</label>
                                <select id="settings-audio-input" class="form-select">
                                    <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>–ì—Ä–æ–º–∫–æ—Å—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞</label>
                                <div class="volume-slider-container">
                                    <input type="range" id="settings-mic-volume" min="0" max="200" value="100" class="volume-slider">
                                    <span id="settings-mic-volume-value">100%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞</label>
                                <div class="mic-test-container">
                                    <button class="btn btn-secondary" id="settings-mic-test-btn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω</button>
                                    <div class="mic-meter" id="settings-mic-meter">
                                        <div class="mic-meter-fill" id="settings-mic-meter-fill"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="settings-divider"></div>
                            <div class="form-group">
                                <label>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤—ã–≤–æ–¥–∞ (–Ω–∞—É—à–Ω–∏–∫–∏/–∫–æ–ª–æ–Ω–∫–∏)</label>
                                <select id="settings-audio-output" class="form-select">
                                    <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>–ì—Ä–æ–º–∫–æ—Å—Ç—å –≤—ã–≤–æ–¥–∞</label>
                                <div class="volume-slider-container">
                                    <input type="range" id="settings-output-volume" min="0" max="100" value="100" class="volume-slider">
                                    <span id="settings-output-volume-value">100%</span>
                                </div>
                            </div>
                            <div class="settings-divider"></div>
                            <h4>–û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–∞</h4>
                            <div class="setting-item">
                                <label for="settings-noise-suppression">–®—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="settings-noise-suppression" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <label for="settings-echo-cancellation">–≠—Ö–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="settings-echo-cancellation" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <label for="settings-auto-gain">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="settings-auto-gain" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <button class="btn btn-primary" id="settings-audio-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                        </div>
                    </div>
                    <div class="settings-section" data-section="appearance">
                        <h3>–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h3>
                        <div class="setting-item">
                            <label for="setting-animations">–ê–Ω–∏–º–∞—Ü–∏–∏</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-animations" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <label for="setting-glow">Glow —ç—Ñ—Ñ–µ–∫—Ç—ã</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-glow" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <label for="setting-dynamic-bg">–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω</label>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-dynamic-bg" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-section" data-section="flash-mode">
                        <h3>Flash Mode</h3>
                        <p>–†–µ–∂–∏–º —É–ª—å—Ç—Ä–∞-–º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–∫—É—Å–∞ –Ω–∞ —á–∞—Ç–µ.</p>
                        <button class="btn btn-primary" id="toggle-flash-mode">–í–∫–ª—é—á–∏—Ç—å Flash Mode</button>
                    </div>
                    <div class="settings-section" data-section="admin">
                        <h3>üõ°Ô∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                        <p style="color: var(--text-muted); margin-bottom: 20px;">–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π</p>
                        
                        <div class="admin-section">
                            <h4>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h4>
                            <button class="btn btn-secondary" id="admin-load-users">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</button>
                            <div class="admin-list" id="admin-users-list"></div>
                        </div>
                        
                        <div class="admin-section" style="margin-top: 24px;">
                            <h4>–°–µ—Ä–≤–µ—Ä—ã</h4>
                            <button class="btn btn-secondary" id="admin-load-servers">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã</button>
                            <div class="admin-list" id="admin-servers-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Editor Modal -->
    <div class="modal" id="image-editor-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="editor-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</h2>
                <button class="modal-close" onclick="ImageEditor.cancel()">&times;</button>
            </div>
            <div class="editor-body">
                <div class="editor-canvas-container avatar-mode" id="editor-canvas-container">
                    <canvas id="editor-canvas"></canvas>
                </div>
                
                <div class="editor-zoom-controls">
                    <div class="editor-zoom-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"/></svg>
                    </div>
                    <input type="range" id="editor-zoom-slider" min="0" max="100" value="50" oninput="ImageEditor.setScale(this.value)">
                    <div class="editor-zoom-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm-2-4h1V8h2V7H8v2h1v1z"/><path d="M12 9h-2v1h2z"/></svg>
                    </div>
                </div>
                
                <div class="editor-actions">
                    <button class="editor-reset-btn" onclick="ImageEditor.reset()">–°–±—Ä–æ—Å</button>
                    <div class="editor-buttons">
                        <button class="editor-btn editor-btn-cancel" onclick="ImageEditor.cancel()">–û—Ç–º–µ–Ω–∞</button>
                        <button class="editor-btn editor-btn-save" onclick="ImageEditor.save()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="user-profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="user-profile-view">
                <div class="profile-banner"></div>
                <div class="profile-info">
                    <div class="profile-avatar-large" id="profile-view-avatar"></div>
                    <div class="profile-name-section">
                        <h3 id="profile-view-username">Username</h3>
                        <span id="profile-view-tag">#0000</span>
                    </div>
                    <div class="profile-bio" id="profile-view-bio"></div>
                    <div class="profile-meta">
                        <div class="meta-item">
                            <span class="meta-label">–°—Ç–∞—Ç—É—Å:</span>
                            <span id="profile-view-status">–û–Ω–ª–∞–π–Ω</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</span>
                            <span id="profile-view-created"></span>
                        </div>
                    </div>
                    <div class="profile-actions">
                        <button class="btn btn-success" id="add-friend-btn">–î–æ–±–∞–≤–∏—Ç—å –≤ –¥—Ä—É–∑—å—è</button>
                        <button class="btn btn-danger modal-cancel">–ó–∞–∫—Ä—ã—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="search-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ù–∞–π—Ç–∏ –ª—é–¥–µ–π</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="search-container">
                <input type="text" id="user-search-input" placeholder="@username#0001 –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∏–º—è...">
                <div class="search-results" id="search-results"></div>
            </div>
        </div>
    </div>

    <!-- Emoji & GIF Picker -->
    <div class="picker-popup" id="emoji-picker">
        <div class="picker-tabs">
            <button class="picker-tab" data-tab="gifs">–ì–∏—Ñ–∫–∏</button>
            <button class="picker-tab" data-tab="stickers">–°—Ç–∏–∫–µ—Ä—ã</button>
            <button class="picker-tab active" data-tab="emoji">–≠–º–æ–¥–∑–∏</button>
        </div>
        
        <!-- GIFs Tab -->
        <div class="picker-content" id="picker-gifs" style="display: none;">
            <div class="picker-search">
                <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                <input type="text" id="gif-search" placeholder="–ü–æ–∏—Å–∫ –≤ Tenor" autocomplete="off">
            </div>
            <div class="gif-categories" id="gif-categories">
                <!-- Categories will be loaded dynamically -->
            </div>
            <div class="gif-results" id="gif-results" style="display: none;"></div>
        </div>
        
        <!-- Stickers Tab -->
        <div class="picker-content" id="picker-stickers" style="display: none;">
            <div class="picker-empty">
                <span>üé®</span>
                <p>–°—Ç–∏–∫–µ—Ä—ã —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è!</p>
            </div>
        </div>
        
        <!-- Emoji Tab -->
        <div class="picker-content" id="picker-emoji">
            <div class="picker-search">
                <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                <input type="text" id="emoji-search" placeholder="–ü–æ–∏—Å–∫ —ç–º–æ–¥–∑–∏" autocomplete="off">
            </div>
            <div class="emoji-grid" id="emoji-grid">
                <span class="emoji-item">üòÄ</span><span class="emoji-item">üòÉ</span><span class="emoji-item">üòÑ</span>
                <span class="emoji-item">üòÅ</span><span class="emoji-item">üòÖ</span><span class="emoji-item">üòÇ</span>
                <span class="emoji-item">ü§£</span><span class="emoji-item">üòä</span><span class="emoji-item">üòá</span>
                <span class="emoji-item">üôÇ</span><span class="emoji-item">üòâ</span><span class="emoji-item">üòç</span>
                <span class="emoji-item">ü•∞</span><span class="emoji-item">üòò</span><span class="emoji-item">üòã</span>
                <span class="emoji-item">üòé</span><span class="emoji-item">ü§©</span><span class="emoji-item">ü•≥</span>
                <span class="emoji-item">üòè</span><span class="emoji-item">üòí</span><span class="emoji-item">üòû</span>
                <span class="emoji-item">üòî</span><span class="emoji-item">üòü</span><span class="emoji-item">üòï</span>
                <span class="emoji-item">üôÅ</span><span class="emoji-item">üò£</span><span class="emoji-item">üòñ</span>
                <span class="emoji-item">üò´</span><span class="emoji-item">üò©</span><span class="emoji-item">ü•∫</span>
                <span class="emoji-item">üò¢</span><span class="emoji-item">üò≠</span><span class="emoji-item">üò§</span>
                <span class="emoji-item">üò†</span><span class="emoji-item">üò°</span><span class="emoji-item">ü§¨</span>
                <span class="emoji-item">ü§Ø</span><span class="emoji-item">üò≥</span><span class="emoji-item">ü•µ</span>
                <span class="emoji-item">ü•∂</span><span class="emoji-item">üò±</span><span class="emoji-item">üò®</span>
                <span class="emoji-item">üò∞</span><span class="emoji-item">üò•</span><span class="emoji-item">üòì</span>
                <span class="emoji-item">ü§ó</span><span class="emoji-item">ü§î</span><span class="emoji-item">ü§≠</span>
                <span class="emoji-item">ü§´</span><span class="emoji-item">ü§•</span><span class="emoji-item">üò∂</span>
                <span class="emoji-item">üòê</span><span class="emoji-item">üòë</span><span class="emoji-item">üò¨</span>
                <span class="emoji-item">üôÑ</span><span class="emoji-item">üòØ</span><span class="emoji-item">üò¶</span>
                <span class="emoji-item">üòß</span><span class="emoji-item">üòÆ</span><span class="emoji-item">üò≤</span>
                <span class="emoji-item">ü•±</span><span class="emoji-item">üò¥</span><span class="emoji-item">ü§§</span>
                <span class="emoji-item">üò™</span><span class="emoji-item">üòµ</span><span class="emoji-item">ü§ê</span>
                <span class="emoji-item">ü•¥</span><span class="emoji-item">ü§¢</span><span class="emoji-item">ü§Æ</span>
                <span class="emoji-item">ü§ß</span><span class="emoji-item">üò∑</span><span class="emoji-item">ü§í</span>
                <span class="emoji-item">ü§ï</span><span class="emoji-item">ü§ë</span><span class="emoji-item">ü§†</span>
                <span class="emoji-item">üëç</span><span class="emoji-item">üëé</span><span class="emoji-item">üëè</span>
                <span class="emoji-item">üôå</span><span class="emoji-item">ü§ù</span><span class="emoji-item">‚úåÔ∏è</span>
                <span class="emoji-item">ü§û</span><span class="emoji-item">ü§ü</span><span class="emoji-item">ü§ò</span>
                <span class="emoji-item">üëå</span><span class="emoji-item">ü§å</span><span class="emoji-item">üëà</span>
                <span class="emoji-item">üëâ</span><span class="emoji-item">üëÜ</span><span class="emoji-item">üëá</span>
                <span class="emoji-item">‚òùÔ∏è</span><span class="emoji-item">‚úã</span><span class="emoji-item">ü§ö</span>
                <span class="emoji-item">üñêÔ∏è</span><span class="emoji-item">üññ</span><span class="emoji-item">üëã</span>
                <span class="emoji-item">ü§ô</span><span class="emoji-item">üí™</span><span class="emoji-item">ü¶æ</span>
                <span class="emoji-item">‚ù§Ô∏è</span><span class="emoji-item">üß°</span><span class="emoji-item">üíõ</span>
                <span class="emoji-item">üíö</span><span class="emoji-item">üíô</span><span class="emoji-item">üíú</span>
                <span class="emoji-item">üñ§</span><span class="emoji-item">ü§ç</span><span class="emoji-item">ü§é</span>
                <span class="emoji-item">üíî</span><span class="emoji-item">üíï</span><span class="emoji-item">üíû</span>
                <span class="emoji-item">üíì</span><span class="emoji-item">üíó</span><span class="emoji-item">üíñ</span>
                <span class="emoji-item">üíò</span><span class="emoji-item">üíù</span><span class="emoji-item">üíü</span>
                <span class="emoji-item">üî•</span><span class="emoji-item">‚ö°</span><span class="emoji-item">‚ú®</span>
                <span class="emoji-item">üåü</span><span class="emoji-item">üí´</span><span class="emoji-item">üéâ</span>
                <span class="emoji-item">üéä</span><span class="emoji-item">üéÅ</span><span class="emoji-item">üéà</span>
            </div>
        </div>
    </div>

    <div class="modal" id="join-server-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="join-server-form">
                <div class="form-group">
                    <label>–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è</label>
                    <input type="text" name="code" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: ABC123XY" style="text-transform: uppercase;">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Server Context Menu -->
    <div class="server-context-menu" id="server-context-menu">
        <div class="context-menu-item" id="ctx-mark-read" data-action="mark-read">
            <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
            <span>–ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ</span>
        </div>
        <div class="context-menu-item" data-action="invite">
            <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <span>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ª—é–¥–µ–π</span>
        </div>
        <div class="context-submenu-wrapper">
            <div class="context-menu-item has-submenu" data-action="mute">
                <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>
                <span>–ó–∞–≥–ª—É—à–∏—Ç—å —Å–µ—Ä–≤–µ—Ä</span>
                <svg class="submenu-arrow" viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>
                <div class="context-submenu">
                    <div class="context-menu-item" data-mute="15">–ù–∞ 15 –º–∏–Ω—É—Ç</div>
                    <div class="context-menu-item" data-mute="60">–ù–∞ 1 —á–∞—Å</div>
                    <div class="context-menu-item" data-mute="180">–ù–∞ 3 —á–∞—Å–∞</div>
                    <div class="context-menu-item" data-mute="480">–ù–∞ 8 —á–∞—Å–æ–≤</div>
                    <div class="context-menu-item" data-mute="1440">–ù–∞ 24 —á–∞—Å–∞</div>
                    <div class="context-menu-divider"></div>
                    <div class="context-menu-item" data-mute="forever">–î–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –≤–∫–ª—é—á—É</div>
                </div>
            </div>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" id="ctx-server-settings" data-action="settings">
            <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
            <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞</span>
        </div>
    </div>

    <!-- Server Settings Modal -->
    <div class="modal" id="server-settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="server-settings-content">
                <div class="server-settings-banner" id="server-settings-banner" title="–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –±–∞–Ω–Ω–µ—Ä">
                    <div class="banner-overlay">
                        <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                    </div>
                    <input type="file" id="server-banner-input" accept="image/*" style="display: none;">
                </div>
                <div class="server-settings-avatar" id="server-settings-avatar" title="–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –∏–∫–æ–Ω–∫—É">
                    <div class="avatar-overlay">
                        <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                    </div>
                    <input type="file" id="server-icon-input" accept="image/*" style="display: none;">
                </div>
                <form class="server-settings-form" id="server-settings-form">
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞</label>
                        <input type="text" name="name" id="server-settings-name" required minlength="2">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary modal-cancel">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Invite Modal -->
    <div class="modal" id="invite-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div style="padding: 24px;">
                <p style="margin-bottom: 12px; color: var(--text-secondary);">–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –¥—Ä—É–∑—å—è–º:</p>
                <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                    <input type="text" id="invite-link-display" readonly style="flex: 1; padding: 12px; background: var(--bg-primary); border: 1px solid var(--bg-tertiary); border-radius: 8px; color: var(--primary); font-size: 14px;">
                    <button class="btn btn-primary" id="copy-invite-link-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                <p style="margin-bottom: 12px; color: var(--text-secondary);">–ò–ª–∏ –∫–æ–¥ –¥–ª—è –≤–≤–æ–¥–∞ –≤—Ä—É—á–Ω—É—é:</p>
                <div style="display: flex; gap: 12px;">
                    <input type="text" id="invite-code-display" readonly style="flex: 1; padding: 12px; background: var(--bg-primary); border: 1px solid var(--bg-tertiary); border-radius: 8px; color: var(--text-primary); font-size: 18px; font-weight: 600; text-align: center; letter-spacing: 2px;">
                    <button class="btn btn-secondary" id="copy-invite-btn">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Mini Profile Popup (global level for z-index) -->
    <div class="user-mini-profile" id="user-mini-profile">
        <div class="mini-profile-banner" id="mini-profile-banner"></div>
        <div class="mini-profile-header">
            <div class="mini-profile-avatar" id="mini-profile-avatar"></div>
            <div class="mini-profile-badge" id="mini-profile-status-badge"></div>
        </div>
        <div class="mini-profile-body">
            <div class="mini-profile-name" id="mini-profile-name">Username</div>
            <div class="mini-profile-tag" id="mini-profile-tag">#0000</div>
            <div class="mini-profile-bio" id="mini-profile-bio"></div>
        </div>
        <div class="mini-profile-divider"></div>
        <div class="mini-profile-actions">
            <button class="mini-profile-btn" id="mini-profile-edit-btn">
                <svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
            </button>
            <div class="mini-profile-status-selector" id="mini-profile-status-selector">
                <div class="status-current" id="status-current">
                    <span class="status-dot-option online" id="status-current-dot"></span>
                    <span id="status-current-text">–í —Å–µ—Ç–∏</span>
                    <svg class="status-arrow" viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/></svg>
                </div>
                <div class="status-dropdown" id="status-dropdown">
                    <div class="status-option" data-status="online">
                        <span class="status-dot-option online"></span>
                        –í —Å–µ—Ç–∏
                    </div>
                    <div class="status-option" data-status="idle">
                        <span class="status-dot-option idle"></span>
                        –ù–µ –∞–∫—Ç–∏–≤–µ–Ω
                    </div>
                    <div class="status-option" data-status="dnd">
                        <span class="status-dot-option dnd"></span>
                        –ù–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å
                    </div>
                    <div class="status-option" data-status="offline">
                        <span class="status-dot-option offline"></span>
                        –ù–µ–≤–∏–¥–∏–º—ã–π
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/store.js"></script>
    <script src="js/crypto.js"></script>
    <script src="js/api.js"></script>
    <script src="js/websocket.js"></script>
    <script src="js/components.js"></script>
    <script src="js/voice.js"></script>
    <script src="js/image-editor.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
